<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>4Hire</title>
    <link rel="stylesheet" href="../assetsUser/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cookie">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="../assetsUser/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../assetsUser/css/Advanced-NavBar---Multi-dropdown.css">
    <link rel="stylesheet" href="../assetsUser/css/best-carousel-slide.css">
    <link rel="stylesheet" href="../assetsUser/css/card-3-column-animation-shadows-images.css">
    <link rel="stylesheet" href="../assetsUser/css/cards.css">
    <link rel="stylesheet" href="../assetsUser/css/Carousel_Image_Slider-1.css">
    <link rel="stylesheet" href="../assetsUser/css/Carousel_Image_Slider.css">
    <link rel="stylesheet" href="../assetsUser/css/Dark-NavBar-1.css">
    <link rel="stylesheet" href="../assetsUser/css/Dark-NavBar-2.css">
    <link rel="stylesheet" href="../assetsUser/css/Dark-NavBar.css">
    <link rel="stylesheet" href="../assetsUser/css/dh-card-image-left-dark.css">
    <link rel="stylesheet" href="../assetsUser/css/dh-header-cover-image-button.css">
    <link rel="stylesheet" href="../assetsUser/css/dh-navbar-inverse-1.css">
    <link rel="stylesheet" href="../assetsUser/css/dh-navbar-inverse-2.css">
    <link rel="stylesheet" href="../assetsUser/css/dh-navbar-inverse.css">
    <link rel="stylesheet" href="../assetsUser/css/Footer-Dark.css">
    <link rel="stylesheet" href="../assetsUser/css/gradient-navbar-1.css">
    <link rel="stylesheet" href="../assetsUser/css/gradient-navbar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="../assetsUser/css/Login-Form-Clean.css">
    <link rel="stylesheet" href="../assetsUser/css/Logo.css">
    <link rel="stylesheet" href="../assetsUser/css/Pretty-Footer.css">
    <link rel="stylesheet" href="../assetsUser/css/Registration-Form-with-Photo.css">
    <link rel="stylesheet" href="../assetsUser/css/styles.css">
    <link rel="stylesheet" href="../assetsUser/css/stylesalert.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assetsUser/css/stylesalert.css">
    <style>
        .dropdown {
        position: relative;
        display: inline-block;
        width: 60px;
      }
      
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #fff;
        /* background-color: #678d2100; */
        min-width: 99px;
        /* z-index: 1; */
        margin-top: 20px;
      }
      
      .dropdown-content a {
        color: black;
        font-family: helvetica;
        padding: 5px 5px;
        text-decoration: none;
        display: block;
      }
      
      .dropdown-content a:hover {
        background: #1475c0;
        color: #fff;
      }
      
      hr.solid {
        border-left: none;
        border-right: none;
        border-top: 1px solid #000000;
        margin-top: -5px;
        /* border-bottom: none; */
      }
      
      .show {
        display: block;
      }
      </style>
    
</head>

<body class="text-capitalize text-left" style="color: #000000;font-family: Roboto, sans-serif;">
    <nav class="navbar navbar-light navbar-expand-md navigation-clean navbar-inverse navbar-fixed-top" style="background-color: rgb(255,255,255);">
        <div class="container">
            <div><a class="navbar-brand" style="padding:0px;margin-left:0px;height:78px;" href="/home"> 
                <img class="img-fluid" src="../assetsUser/img/IMG_20221010_113058_320-removebg-preview.png"></a></div><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div
                class="collapse navbar-collapse text-center" id="navcol-1">
                <ul class="nav navbar-nav text-capitalize ml-auto" style="margin-right: 10px;">
                    <li class="nav-item" role="presentation"><a class="nav-link text-capitalize" uk-scroll="offset:50" style="font-family: Roboto, sans-serif;color: #000000;font-weight: bold;" href="#">Home </a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link text-capitalize" uk-scroll="offset:100" href="/task" style="font-family: Roboto, sans-serif;color: #000000;font-weight: bold;">Tasks</a></li>
                </ul>
                <div class="dropdown" style="margin-left: 30px">

                    <img class="dropbtn" id="drop"
                        src="../img/userImg/<%=user.photo%>" style="margin-left:-30px; width: 50px; height :50px; border-radius: 30px;"/>
                    
                    <div id="myDropdown" class="dropdown-content" style=" margin-left: -70px; margin-top: 30px; width: 205px;">
                      <div>
                        <a href="/profile"><i class="fa fa-user" style="margin-right: 10px;"></i><%=user.name%>  </a>
                      </div>
  
                      <div>
                        <a id="logout" style="padding-right:28px;"><i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i>Logout</a>
                      </div>
  
  
                </div>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="box" style="margin-right: 18px;">
            <a href="/profile"><img class="rounded-circle rounded-circle" src="../img/userImg/<%=user.photo%>" style="width: 50px;height: 50px;left: 1250px;top: 13px;margin-left: -52px;"></a>
            <div class="box1"><a href="/addtask" style="color: black; margin-top: 10px; margin-bottom: -29px; margin-left: 20px; position: absolute;">Post task</a></div>
        </div>

        <% if (tasks.length) { %> <% for (let Task of tasks ) {%>
        <form>
            <div class="box2" style="margin-right: 18px;">
                <img class="rounded-circle rounded-circle" src="../assetsUser/img/Dophu.jpeg" style="width: 50px;height: 50px;left: 1250px;top: 13px;margin-left: -52px;">
                <h1 style="margin-top: -50px; margin-left:45px; color: #000000; font-weight: bold; font-size: 16px;"><%=Task.postedBy.name%></h1>
                <h1 style="margin-top: 10px; margin-left:45px; color: #000000; font-size: 16px;"><%=moment(Task.postDate).format('DD MMMM, YYYY')%></h1>
                <h1 style="margin-top: -28px; margin-left:250px; color: #000000; font-weight: normal; font-size: 16px;">Due: <%=Task.dueDate%> </h1>
                <a href="#"><i class="fa fa-flag-o" style="margin-left: 950px; margin-right: 30px; margin-top: -27px; float: right; color: #E0293F" data-toggle="modal" data-target="#exampleModal<%=Task.id%>"></i></a>

                <!-- Button trigger modal -->
                 <!-- Modal -->
                <div class="modal fade" id="exampleModal<%=Task.id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content" value="<%=Task.id%>">
                <div class="modal-header">
                <h6 class="modal-title" id="exampleModalLabel">Do you want to report this task?</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                Reported tasks will be verified by the admin and reloved within 3 days.
                </div>
                <div class="modal-footer">
                <button type="button" style="background-color:#B9B7B7; color:#ffffff;" id="ni"   class="btn btn-sm" data-dismiss="modal">Cancel</button>
                <button type="button"  style="background-color:#67A4F9; color:#ffffff;" id="nim" class="btn btn-sm ">Confirm</button>
                </div>
                </div>
                </div>
                </div>

                <div class="box3">
                  <br>
                    <p style="margin-top:-15px; margin-left: 20px;"><%=Task.description%></p>
                    <br>
                </div>
                <button class="button" style="margin-left: -600px; margin-right: 20px; margin-top: 50px; width: 150px; height: 42px; left: 967px; top: 416px; background: #67A4F9; border-radius: 10px; border-color:#ffffff; float: right; color:#ffffff;" data-toggle="modal" data-target="#exampleModal1<%=Task.id%>" type="button">Apply</button>

                <!-- Button trigger modal -->

                <div class="modal fade" id="exampleModal1<%=Task.id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content" value="<%=Task.id%>">
                <div class="modal-header" id="user" value="<%=user.id%>">
                
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                Apply for ths task, if the poster accepts then the task will show up on your profile 
                </div>
                <div class="modal-footer">
                    <button type="button" style="background-color:#B9B7B7; color:#ffffff;" class="btn btn-sm" data-dismiss="modal">Cancel</button>
                    <button type="button"  style="background-color:#67A4F9; color:#ffffff;" id="apply" class="btn btn-sm ">Confirm</button>
                </div>
                </div>
                </div>
              </div>
              </div>
            </form>

        <% } %> <% } else { %>
          <div>There are no tasks</div>
        <% } %>
    </div>

    <script src="../assetsUser/js/jquery.min.js"></script>
    <script src="../assetsUser/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assetsUser/js/Advanced-NavBar---Multi-dropdown.js"></script>

    <script>
        document.getElementById("drop").addEventListener("click", function(e) {
      document.getElementById("myDropdown").classList.toggle("show");
    });
    
    
    // Close the dropdown if the user clicks outside of it
    window.addEventListener("click", function(event) {
      if (!event.target.matches('.dropbtn')) {
        document.querySelectorAll(".dropdown-content.show")
          .forEach(openDropdown => openDropdown.classList.remove('show'))
      }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.min.js"></script>
<script type="module" src="../js/login.js"></script>
<script type="module" src="../js/applyfortask.js"></script>
</body>

</html>